#!/usr/bin/env ruby

# Standalone script to inspect what applications are running on all nodes
# Usage: ./bin/inspect-nodes

load File.join(File.dirname(__FILE__), '../lib/common.rb')

inspector = NodeInspector.new.discover
inspector.print_all

# Run sanity checks
errors = inspector.sanity_check

puts ""
if errors.empty?
  puts "Infra looks good"
else
  puts Util.underline("Issues")
  errors.each { |e| puts Util.warning("  - #{e}") }
end
puts ""
